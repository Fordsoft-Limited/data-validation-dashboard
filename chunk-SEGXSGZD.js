import{a as me,b as se}from"./chunk-DFYT2OQB.js";import{b as re}from"./chunk-WXZQG76U.js";import{b as ae}from"./chunk-JK2WCNHE.js";import{e as H,q as ie}from"./chunk-B2LPOMVQ.js";import"./chunk-FJZWMPVK.js";import{b as W}from"./chunk-EYNK32OA.js";import"./chunk-BL7XLXFW.js";import"./chunk-Y2TWHHJT.js";import{b as z}from"./chunk-SDXV7PTX.js";import{a as ne}from"./chunk-FDQ6KAAT.js";import"./chunk-SXPLR5LF.js";import"./chunk-BUAUGQZJ.js";import{a as oe}from"./chunk-FIIS3JHD.js";import"./chunk-6YX36K4P.js";import{e as U,f as J,g as K,h as V,j as ee,k as te}from"./chunk-GKUFW2RI.js";import{a as G}from"./chunk-D6OM4TL4.js";import{c as Z}from"./chunk-UNZMK42Y.js";import"./chunk-VZKXXVR6.js";import"./chunk-LHYMOAVA.js";import{a as O}from"./chunk-HDDFEM7G.js";import{d as X,n as Y}from"./chunk-VTKS6MIP.js";import"./chunk-XVURSSVY.js";import"./chunk-KMIFLFRM.js";import"./chunk-5TMXRYYI.js";import{h as $}from"./chunk-JSMWOMP6.js";import"./chunk-5Q75OANQ.js";import{$ as c,Ab as R,Db as B,Ja as S,Mc as Q,O as M,Q as r,R as f,Ra as w,Ta as E,Ub as D,Vb as x,ba as s,cb as T,db as C,ea as b,ha as a,hb as N,hc as A,ia as n,ib as F,ja as _,oa as I,pa as u,s as k,sc as L,tc as j,vc as q,x as y,y as h,ya as m,yb as P,za as d}from"./chunk-AWEHUNTX.js";import"./chunk-DM275RSA.js";function pe(e,l){if(e&1&&(a(0,"div",5)(1,"span"),m(2),n()()),e&2){let t=u();r(2),d(t.newData)}}function fe(e,l){if(e&1&&(a(0,"div",6)(1,"span"),m(2),n()()),e&2){let t=u();r(2),d(t.existingData)}}function ge(e,l){e&1&&(a(0,"div",7)(1,"span"),m(2,"-----"),n()())}function ye(e,l){e&1&&(a(0,"div",8)(1,"span"),m(2,"-----"),n()())}var de=(()=>{class e{constructor(){this.newData=null,this.existingData=null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-customer-detail-field"]],inputs:{fieldName:"fieldName",newData:"newData",existingData:"existingData"},decls:7,vars:5,consts:[[1,"field-container"],["class","data new-data",4,"ngIf"],["class","data existing-data",4,"ngIf"],["class","data no-data",4,"ngIf"],["class","data no-data-exist",4,"ngIf"],[1,"data","new-data"],[1,"data","existing-data"],[1,"data","no-data"],[1,"data","no-data-exist"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"label"),m(2),n(),c(3,pe,3,1,"div",1)(4,fe,3,1,"div",2)(5,ge,3,0,"div",3)(6,ye,3,0,"div",4),n()),i&2&&(r(2),d(o.fieldName),r(),s("ngIf",o.newData&&o.newData!==""),r(),s("ngIf",o.existingData&&o.existingData!==""),r(),s("ngIf",!o.newData||o.newData===""),r(),s("ngIf",!o.existingData||o.existingData===""))},dependencies:[C],styles:[".field-container[_ngcontent-%COMP%]{margin-bottom:1rem}.label[_ngcontent-%COMP%]{font-weight:700}.data[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;margin-top:.5rem}.new-data[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{background-color:#e0ffe0}.existing-data[_ngcontent-%COMP%], .no-data-exist[_ngcontent-%COMP%]{background-color:#f0f0f0}.empty-data[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;margin-top:.5rem;background-color:#f0f0f0}"]})}}return e})();var Ce=e=>({"background-color":e});function ve(e,l){if(e&1&&(a(0,"div",11),_(1,"app-customer-detail-field",12),n()),e&2){let t=l.$implicit,i=u();r(),s("fieldName",t.name)("newData",i.newData&&(i.newData[t.key]==null?null:i.newData[t.key].toString())||null)("existingData",i.existingData&&(i.existingData[t.key]==null?null:i.existingData[t.key].toString())||null)}}function De(e,l){if(e&1&&(a(0,"span",13),_(1,"i",14),n()),e&2){let t=l.$implicit;b(S(2,Ce,t.status==="Rejected"?"#ff0000":"#00ff00"))}}function xe(e,l){if(e&1&&(a(0,"div",15)(1,"p",16)(2,"b"),m(3,"Category: "),n(),m(4),n(),a(5,"p",16)(6,"b"),m(7,"Status: "),n(),m(8),n(),a(9,"p",16)(10,"b"),m(11,"Description: "),n(),m(12),n(),a(13,"p",16)(14,"b"),m(15,"Posted by: "),n(),m(16),n(),a(17,"p",16)(18,"b"),m(19,"Date: "),n(),m(20),w(21,"date"),n()()),e&2){let t=l.$implicit;r(4),d(t.category),r(4),d(t.status),r(4),d(t.description),r(4),d(t.posted_by.name),r(4),d(E(21,5,t.event_date,"MM/dd/yyyy HH:mm"))}}function ke(e,l){if(e&1&&(a(0,"div",17),_(1,"img",18),n()),e&2){let t=u();r(),s("src",t.qrCode,M)}}var ce=(()=>{class e{constructor(t,i,o,g){this.customerService=t,this.route=i,this.router=o,this.authService=g,this.customerId="",this.customerNo="",this.customer=null,this.newData=null,this.existingData=null,this.events=null,this.dataEntryHistory=[],this.qrCode=null,this.customerFields=[{name:"Customer Full Name",key:"customer_full_name"},{name:"Account Number",key:"account_no"},{name:"Meter Number",key:"meter_no"},{name:"Address",key:"address"},{name:"City",key:"city"},{name:"LGA",key:"lga"},{name:"State",key:"state"},{name:"Nearest Landmark",key:"nearest_landmark"},{name:"Setup Date",key:"setup_date"},{name:"Latitude",key:"latitude"},{name:"Longitude",key:"longitude"},{name:"Customer ID",key:"customer_id"},{name:"CIN",key:"cin"},{name:"Application Date",key:"application_date"},{name:"Mobile Number",key:"mobile"},{name:"Email",key:"email"},{name:"Status Code",key:"status_code"},{name:"Account Type",key:"account_type"},{name:"Current Tariff Code",key:"current_tariff_code"},{name:"Correct Tariff Code",key:"correct_tariff_code"},{name:"Tariff Class",key:"tariff_class"},{name:"Feeder",key:"feeder"},{name:"Feeder ID",key:"feeder_id"},{name:"Service Center",key:"service_center"},{name:"Distribution Name",key:"distribution_name"},{name:"DSS ID",key:"dss_id"},{name:"LT Pole ID",key:"lt_pole_id"},{name:"Service Wire",key:"service_wire"},{name:"Upriser",key:"upriser"},{name:"Region",key:"region"},{name:"Business Hub",key:"business_hub"},{name:"Account Category",key:"account_category"},{name:"Connection Type",key:"connection_type"},{name:"Customer's Nature of Business",key:"cust_nature_of_business"},{name:"Customer NIN",key:"customer_nin"},{name:"Customer Supply Type",key:"customer_supply_type"},{name:"Customer Estimated Load",key:"customer_estimated_load"},{name:"Customer Has Meter",key:"cust_has_meter"},{name:"Customer Meter Category",key:"customer_meter_category"},{name:"Customer Meter Manufacturer",key:"customer_meter_manufacturer"},{name:"Customer Meter Sealed",key:"customer_meter_saled"},{name:"Customer Meter Accessible",key:"customer_meter_accessible"},{name:"Customer Meter Location",key:"customer_meter_location"},{name:"Customer Bill Name",key:"customer_bill_name"},{name:"Customer Has Account Number",key:"customer_has_account_no"},{name:"Customer Group",key:"customer_group"},{name:"Is Landlord",key:"is_landlord"},{name:"Landlord Name",key:"landlord_name"},{name:"Landlord Phone",key:"landlord_phone"},{name:"Tenant Name",key:"tenant_name"},{name:"Tenant Phone",key:"tenant_phone"},{name:"Meter CT Ratio",key:"meter_ct_ratio"}]}ngOnInit(){let t=this.route.snapshot.paramMap.get("uid");this.customerId=t||"",this.loadCustomerDetails(this.customerId),console.log(this.customerId),console.log(t)}loadCustomerDetails(t){this.customerId&&this.customerService.getCustomerById(t).subscribe(i=>{if(console.log("API response:",i),i.code===200){let{new:o,old:g}=i.data;this.newData=o,this.existingData=g,this.events=o.events,this.dataEntryHistory=this.events.map(p=>({description:p.description,color:p.status==="Rejected"?"#ff0000":"#00ff00",category:p.category,status:p.status,date:p.event_date,icon:"pi pi-info-circle"}));let v=o.customer_no;v?(this.loadQrCode(v),console.log(v)):console.error("Customer number is not available."),console.log("New Data:",this.newData),console.log("Existing Data:",this.existingData),console.log("Event:",this.events)}},i=>{console.error("Error fetching customer data:",i)})}loadQrCode(t){this.customerService.getCustomerQrCode(t).subscribe({next:i=>{i.code===200?(this.qrCode=i.data?.qr_code,console.log("QR Code URL:",this.qrCode)):(console.error("Failed to fetch QR code:",i.message||i),alert("Failed to retrieve the QR code. Please try again."))},error:i=>{console.error("Error retrieving QR code:",i)}})}goBack(){window.history.back()}static{this.\u0275fac=function(i){return new(i||e)(f(ne),f(P),f(R),f(O))}}static{this.\u0275cmp=y({type:e,selectors:[["app-customer-details"]],decls:15,vars:3,consts:[[1,"customer-details-container"],["pButton","",1,"mb-3",3,"click"],[1,"grid"],[1,"col-12","md:col-8"],["class","col-12 md:col-6",4,"ngFor","ngForOf"],[1,"col-12","md:col-4"],["align","alternate","styleClass","customized-timeline",3,"value"],["pTemplate","marker"],["pTemplate","content"],[1,"col-12","flex","justify-content-center"],["class","qr-code",4,"ngIf"],[1,"col-12","md:col-6"],[3,"fieldName","newData","existingData"],[1,"flex","w-2rem","h-2rem","align-items-center","justify-content-center","text-white","border-circle","z-1","shadow-1"],[1,"pi","pi-inbox"],[1,"card","w-100%"],[1,"text-xs"],[1,"qr-code"],["alt","Customer QR Code","width","300px",1,"qr-code-image",3,"src"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"button",1),I("click",function(){return o.goBack()}),m(2,"Back"),n(),a(3,"h2"),m(4,"Customer Details"),n(),a(5,"div",2)(6,"div",3)(7,"div",2),c(8,ve,2,3,"div",4),n()(),a(9,"div",5)(10,"p-timeline",6),c(11,De,2,4,"ng-template",7)(12,xe,22,8,"ng-template",8),n()(),a(13,"div",9),c(14,ke,2,1,"div",10),n()()()),i&2&&(r(8),s("ngForOf",o.customerFields),r(2),s("value",o.events),r(4),s("ngIf",o.qrCode))},dependencies:[T,C,A,j,me,de,N],styles:[".custom-header[_ngcontent-%COMP%]{font-size:1.5rem;color:#007ad9;font-weight:700;padding:10px}.custom-subheader[_ngcontent-%COMP%]{font-size:1rem;color:gray;font-style:italic;padding-bottom:5px}"]})}}return e})();var he=[{path:":uid",component:ce}],at=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=k({imports:[F,Y,z,q,H,re,Q,ie,se,oe,L,J,W,$,ae,G,Z,V,K,U,X,x,D,ee,te,B.forChild(he),x,D]})}}return e})();export{at as CustomerDetailsModule,he as customerDetailsRoutes};
