<div class="card">
    <form [formGroup]="filterForm" (ngSubmit)="filterData()">
        <div class="flex gap-5 mb-4 justify-content-center flex-wrap">
  
          <div class="flex flex-column gap-2">
              <label for="region">Region:</label>
              <!-- <input type="text" formControlName="region" pInputText placeholder="Enter Region" class="region-input" /> -->
              <p-dropdown formControlName="region" [options]="regions"[editable]="true" (onChange)="onRegionChange($event)" placeholder="Enter Region"></p-dropdown>
            </div>
  
            <div class="flex flex-column gap-2">
              <label for="businessUnit">Business Unit:</label>
              <p-dropdown formControlName="businessUnit" [options]="businessUnits" [editable]="true" (onChange)="onBusinessHubChange($event)" placeholder="Select Business Unit"></p-dropdown>
            </div>
  
            <div class="flex flex-column gap-2">
              <label for="feeder">Service:</label>
              <p-dropdown formControlName="feeder" [options]="feeders" [editable]="true" placeholder="Select Service"></p-dropdown>
            </div>
  
          <div class="flex flex-column gap-2">
            <label for="dateRange">Date Range:</label>
            <div class="flex gap-2"> 
              <input type="date" formControlName="dateCreatedFrom" pInputText class="date-from" />
              <input type="date" formControlName="dateCreatedTo" pInputText class="date-to" />
            </div>
          </div>
    
    
          <div class="flex gap-2 mt-5">
            <p-button type="submit" label="Filter"></p-button>
            <!-- <p-button type="button" [loading]="isResetLoading" label="Reset Filter" [outlined]="true" (click)="resetFilter()" severity="danger"></p-button> -->
          </div>
        </div>
      </form>
  
    <p-table #dt1 [value]="filteredNewCustomers" dataKey="uid" [(selection)]="selectedNewCustomer" [rows]="100" 
             [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true"
             [globalFilterFields]="['feeder', 'meterNo', 'date', 'status']" (onRowSelect)="showDetails($event.data)"  [scrollable]="true" 
             scrollHeight="400px">
        <ng-template pTemplate="caption">
            <div class="flex">
                <!-- <p-button label="Clear" [outlined]="true" icon="pi pi-filter-slash" (onClick)="clear(dt1)" /> -->
  
                <p-button label="Review" [loading]="loading" (click)="navigateToDetails()" 
                          [disabled]="selectedNewCustomer.length === 0" class="ml-3"></p-button>
                
                <!-- <p-button label="Show Details" (click)="navigateToDetails()"   class="ml-3"></p-button> -->
                <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" [(ngModel)]="searchValue" #filter
                        (input)="onGlobalFilter(dt1, $event)" placeholder="Keyword Search">
                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
                <th style="min-width:15rem">
                    <div class="flex align-items-center">
                        Customer No
                    </div>
                </th>
                <th style="min-width:15rem">
                    <div class="flex align-items-center">
                        Feeder
                    </div>
                </th>
                <th style="min-width:15rem">
                    <div class="flex align-items-center">
                        Meter No
                        
                    </div>
                </th>
  
                <th style="min-width:10rem">
                    <div class="flex align-items-center">
                        Date
                    </div>
                </th>
  
                <th style="min-width:10rem">
                    <div class="flex align-items-center">
                        Status
                    
                    </div>
                </th>

                <th style="min-width:10rem">
                    <div class="flex align-items-center">
                        Action
                    
                    </div>
                </th>
             
  
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-filteredCustomer>
            <tr  class="cursor-pointer">
                <td  >
                    <p-tableCheckbox [value]="filteredCustomer" />
                </td>
  
                <td>
  
                    {{filteredCustomer.customer_no}}
                </td>
                <td>
  
                    {{filteredCustomer.feeder}}
                </td>
                <!-- <td>
                    {{filteredCustomer.account_no}}
                </td> -->
                <td>
                    {{filteredCustomer.meter_no}}
                </td>
                <td>
                    {{ filteredCustomer.date_created | date: 'MM/dd/yyyy' }}
                </td>
  
                <td>
                    <p-tag [value]="filteredCustomer.approval_status" [severity]="getSeverity(filteredCustomer.approval_status)" />
                </td>

                <td>
                    <button pButton icon="pi pi-eye" class="p-button-text" (click)="viewDetails(filteredCustomer)"></button>
                  </td>
  
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="7">No customers found.</td>
            </tr>
        </ng-template>
    </p-table>
  </div>
  
  
  
  