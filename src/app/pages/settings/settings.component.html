<div class="grid">

    <div class="col-12 mt-2">
        <h3>Account Settings</h3>
    </div>

    <div class="col-12 -mt-4">
        <p-tabView [style]="{'background-color': 'transparent'}">
            <p-tabPanel header="Profile" leftIcon="pi pi-user">
                <!-- [headerStyle]='{"width": "250px"}' -->
                <div class="settings-container">
                    <div class="profile-content">
                        <!-- <div class="image-upload-section">
                            <div class="image-container" *ngIf="!imageUrl">
                                <i class="pi pi-camera" style="font-size: 1.5rem"></i>
                            </div>
                            <div class="image-preview" *ngIf="imageUrl">
                                <img [src]="imageUrl" alt="Profile Image" class="profile-image" />
                            </div>


                          
                            <p-fileUpload #fileInput mode="basic" accept="image/*" [maxFileSize]="1000000"
                                (onSelect)="onImageSelect($event)" [auto]="false" [customUpload]="true"
                                (uploadHandler)="onUpload($event)" chooseLabel="Upload Image"
                                class="file-upload"></p-fileUpload>

                            <button pButton (click)="cancelUpload()" class="p-button-danger">Cancel Upload</button>
                        </div> -->

                        <!-- Profile Edit Form -->
                        <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
                            <!-- Name Input -->
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input id="name" type="text" pInputText placeholder="Enter your name" class="input-text"
                                    formControlName="name" />
                            </div>

                            <!-- Email Input -->
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input id="email" type="email" pInputText placeholder="Enter your email"
                                    formControlName="email" class="input-text" />
                            </div>

                            <!-- Phone Number Input -->
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input id="phone" type="tel" pInputText placeholder="Enter your phone number"
                                    formControlName="phone" class="input-text" />
                            </div>

                            <!-- Save Button -->
                            <button pButton label="Save Changes" icon="pi pi-check" class="p-button-success"></button>
                        </form>
                    </div>
                </div>
            </p-tabPanel>


            <p-tabPanel header="Change Password" leftIcon="pi pi-sync">
                <div class="settings-container mt-4">
                  <div class="max-w-19rem">
                    <form [formGroup]="passwordForm" (ngSubmit)="handlePasswordChange()">
                      <!-- Current Password -->
                      <div class="form-group flex flex-column gap-2">
                        <label for="">Current Password</label>
                        <p-password [toggleMask]="true" class="w-full custom-password" [feedback]="false" formControlName="currentPassword" />
                        <small *ngIf="passwordForm.get('currentPassword')?.touched && passwordForm.get('currentPassword')?.invalid" class="p-error">
                          Current Password is required and must be at least 6 characters.
                        </small>
                      </div>
              
                      <!-- New Password -->
                      <div class="form-group flex flex-column gap-2">
                        <label for="">New Password</label>
                        <p-password [toggleMask]="true" class="w-full custom-password" formControlName="newPassword" />
                        <small *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.invalid" class="p-error">
                          New Password is required and must be at least 6 characters.
                        </small>
                      </div>
              
                      <!-- Confirm New Password -->
                      <div class="form-group flex flex-column gap-2">
                        <label for="">Confirm New Password</label>
                        <p-password [toggleMask]="true" class="w-full custom-password" formControlName="confirmPassword" />
                        <small *ngIf="passwordForm.errors?.['mismatch'] && passwordForm.get('confirmPassword')?.touched" class="p-error">
                          Passwords do not match.
                        </small>
                      </div>
              
                      <!-- Submit Button -->
                      <button pButton label="Change Password" class="p-button w-full" type="submit"></button>
                    </form>

                   <!-- Success Notification -->
<div *ngIf="passwordChanged" class="text-center"
style="border: 1px solid #218838; background-color: #28a745; color: white; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
<p><i class="pi pi-check-circle" style="margin-right: 5px;"></i>{{ backendsuccessMessage }}</p>
</div>

<!-- Error Notification -->
<div *ngIf="backendErrorMessage" class="text-center"
style="border: 1px solid #c82333; background-color: #dc3545; margin-top: 20px; color: white; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
<p><i class="pi pi-exclamation-triangle" style="margin-right: 5px;"></i> {{ backendErrorMessage }}</p>
</div>

                  </div>


                 
  
                </div>

  
              </p-tabPanel>
              

        </p-tabView>
    </div>

</div>