<div class="card">
  <form [formGroup]="filterForm" (ngSubmit)="filterData()">
      <div class="flex gap-5 mb-4 justify-content-center">
        <div class="flex flex-column gap-2">
          <label for="dateRange">Date Range:</label>
          <div class="flex gap-2"> 
              <input type="date" formControlName="dateRange" pInputText class="date-range"/>
              <input type="date" formControlName="dateRange" pInputText class="date-range"/>
          </div>
          
        </div>
  
        <div class="flex flex-column gap-2">
          <label for="feeder">Feeder:</label>
          <p-dropdown formControlName="feeder" [options]="feeders" placeholder="Select Feeder"></p-dropdown>
        </div>
  
        <div class="flex flex-column gap-2">
          <label for="businessUnit">Business Unit:</label>
          <p-dropdown formControlName="businessUnit" [options]="businessUnits" placeholder="Select Business Unit"></p-dropdown>
        </div>
  
        <p-button type="submit" label="Filter" class="mt-4"></p-button>
      </div>
  </form>

  <p-table #dt1 [value]="filteredDataValidations" dataKey="id" [rows]="10" [rowsPerPageOptions]="[10, 25, 50]"
      [loading]="loading" [paginator]="true" [globalFilterFields]="['feeder', 'meterNo', 'date', 'status']"
      (onRowSelect)="showDetails($event.data)">
      <ng-template pTemplate="caption">
          <div class="flex">
              <p-button label="Clear" [outlined]="true" icon="pi pi-filter-slash" (onClick)="clear(dt1)" />
<!-- 
              <p-button label="Show Details" (click)="openDialog()" [disabled]="!selectedDataValidation" class="ml-3"></p-button> -->
              
              <p-button label="Show Details" (click)="navigateToDetails()"   class="ml-3"></p-button>
              <span class="p-input-icon-left ml-auto">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text" [(ngModel)]="searchValue" #filter
                      (input)="onGlobalFilter(dt1, $event)" placeholder="Keyword Search">
              </span>
          </div>
      </ng-template>
      <ng-template pTemplate="header">
          <tr>
              <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
              <th style="min-width:15rem">
                  <div class="flex align-items-center">
                      Customer ID
                      <!-- <p-columnFilter type="text" field="id" display="menu" /> -->
                  </div>
              </th>
              <th style="min-width:15rem">
                  <div class="flex align-items-center">
                      Feeder
                      <p-columnFilter type="text" field="feeder" display="menu" />
                  </div>
              </th>
              <th style="min-width:15rem">
                  <div class="flex align-items-center">
                      Meter No
                      <p-columnFilter type="text" field="district" display="menu" />
                  </div>
              </th>

              <th style="min-width:10rem">
                  <div class="flex align-items-center">
                      Date
                      <p-columnFilter type="date" field="date" display="menu" />
                  </div>
              </th>

              <th style="min-width:10rem">
                  <div class="flex align-items-center">
                      Status
                      <p-columnFilter field="status" matchMode="equals" display="menu">
                          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                              <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)"
                                  placeholder="Any">
                                  <ng-template let-option pTemplate="item">
                                      <p-tag [value]="option.value" [severity]="getSeverity(option.label)" />
                                  </ng-template>
                              </p-dropdown>
                          </ng-template>
                      </p-columnFilter>
                  </div>
              </th>

          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-dataValidation>
          <tr  class="cursor-pointer">
              <td  >
                  <p-tableCheckbox [value]="dataValidation" />
              </td>
              <td>

                  {{dataValidation.customerId}}
              </td>
              <td>

                  {{dataValidation.feeder}}
              </td>
              <td>
                  {{dataValidation.meterNo}}
              </td>

              <td>
                  {{ dataValidation.date | date: 'MM/dd/yyyy' }}
              </td>

              <td>
                  <p-tag [value]="dataValidation.status" [severity]="getSeverity(dataValidation.status)" />
              </td>

          </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
          <tr>
              <td colspan="7">No customers found.</td>
          </tr>
      </ng-template>
  </p-table>
</div>



<!-- <p-dialog [(visible)]="showDetailsDialog" modal="modal" [closable]="true" [header]="selectedDataValidation?.customerId"
  [style]="{ width: '50rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
  <div *ngIf="selectedDataValidation" class="grid">

      <div class="col-12 md:col-6">
          <p><strong>Customer Full Name:</strong> {{ selectedDataValidation.customerFullName }}</p>
          <p><strong>Account No:</strong> {{ selectedDataValidation.accountNo }}</p>
          <p><strong>Meter No:</strong> {{ selectedDataValidation.meterNo }}</p>
          <p><strong>Address:</strong> {{ selectedDataValidation.address }}</p>
          <p><strong>City:</strong> {{ selectedDataValidation.city }}</p>
          <p><strong>LGA:</strong> {{ selectedDataValidation.lga }}</p>
          <p><strong>State:</strong> {{ selectedDataValidation.state }}</p>
          <p><strong>Nearest Landmark:</strong> {{ selectedDataValidation.nearestLandmark }}</p>
          <p><strong>Date:</strong> {{ selectedDataValidation.date | date: 'MM/dd/yyyy' }}</p>
          <p><strong>Latitude:</strong> {{ selectedDataValidation.latitude }}</p>
          <p><strong>Longitude:</strong> {{ selectedDataValidation.longitude }}</p>
          <p><strong>Customer ID:</strong> {{ selectedDataValidation.customerId }}</p>
          <p><strong>CIN:</strong> {{ selectedDataValidation.cin }}</p>
      </div>
      <div class="col-12 md:col-6">
          <p><strong>Application Date:</strong> {{ selectedDataValidation.applicationDate | date: 'MM/dd/yyyy' }}</p>
          <p><strong>Mobile:</strong> {{ selectedDataValidation.mobile }}</p>
          <p><strong>Email:</strong> {{ selectedDataValidation.email }}</p>
          <p><strong>Status Code:</strong> {{ selectedDataValidation.statusCode }}</p>
          <p><strong>Account Type:</strong> {{ selectedDataValidation.accountType }}</p>
          <p><strong>Current Tariff Code:</strong> {{ selectedDataValidation.currentTariffCode }}</p>
          <p><strong>Correct Tariff Code:</strong> {{ selectedDataValidation.correctTariffCode }}</p>
          <p><strong>Tariff Class:</strong> {{ selectedDataValidation.tariffClass }}</p>
          <p><strong>Feeder:</strong> {{ selectedDataValidation.feeder }}</p>
          <p><strong>Service Center:</strong> {{ selectedDataValidation.serviceCenter }}</p>
          <p><strong>Region:</strong> {{ selectedDataValidation.region }}</p>
          <p><strong>Business Hub:</strong> {{ selectedDataValidation.businessHub }}</p>

          <p>
              <strong>Status:</strong>
              <p-tag *ngIf="selectedDataValidation" [value]="selectedDataValidation.status ?? 'Unknown'"
                  [severity]="getSeverity(selectedDataValidation.status ?? 'Unknown')">
              </p-tag>
          </p>
      </div>
      

      <div class="col-12 flex flex-column gap-2">
          <label for="comments">Comments:</label>
          <textarea id="comments" rows="3" [(ngModel)]="comments" pInputTextarea></textarea>
      </div>

      <div class="col-12 flex justify-content-between ">
          <p-button label="Reject" (click)="rejectRecord()" [disabled]="!selectedDataValidation"
              severity="danger"></p-button>
          <p-button label="Approve" (click)="approveRecord()" [disabled]="!selectedDataValidation"
              severity="success"></p-button>
      </div>

      <div class="col-12 flex justify-content-end gap-3 mt-4">
          <p-button label="Previous" (click)="previousRecord()" [disabled]="isPreviousDisabled()"></p-button>
          <p-button label="Next" (click)="nextRecord()" [disabled]="isNextDisabled()"></p-button>
      </div>
  </div>
</p-dialog> -->