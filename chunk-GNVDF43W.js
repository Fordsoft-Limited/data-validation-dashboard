import{a as X}from"./chunk-CNB447IW.js";import{a as Z}from"./chunk-DAA3EAUB.js";import{d as q,e as J}from"./chunk-GKUFW2RI.js";import{b as z,c as Y}from"./chunk-UNZMK42Y.js";import{b as U,c as G}from"./chunk-VTKS6MIP.js";import{g as K,h as Q}from"./chunk-JSMWOMP6.js";import{$ as F,Ca as l,D as O,Da as d,E as A,Ea as m,Fa as L,Ia as w,Ib as H,K as y,Nb as h,Q as s,R as c,Ub as R,Vb as D,ba as p,cc as f,db as j,ea as E,ha as i,hb as _,ia as r,ib as P,ja as T,na as k,oa as g,pa as C,s as M,ua as I,uc as V,va as W,vc as N,wa as B,x as v,y as S}from"./chunk-AWEHUNTX.js";var b=[{name:"Ogun",businessHubs:[{name:"Sagamu",serviceCentres:[{name:"Ogijo"},{name:"Eyita"},{name:"Iperu"},{name:"Sapade"},{name:"Igbobi 2"},{name:"Igbobi 1"},{name:"Sabo-Sagamu"},{name:"Ikenne"},{name:"Hospital road"},{name:"Odogbolu"}]},{name:"Ota",serviceCentres:[{name:"Town"},{name:"Abebi"},{name:"Ado-odo"},{name:"Atan-ota"},{name:"Estate- Ota"},{name:"Itele"},{name:"Owode-ota"},{name:"Akeja"},{name:"Lafenwa-Ota"},{name:"Idiroko road"},{name:"Iganmode"},{name:"Iju"},{name:"Lusada"},{name:"Ewupe"},{name:"Ilogbo"},{name:"Iyesi"}]}]},{name:"Ibadan",businessHubs:[{name:"Molete",serviceCentres:[{name:"Challenge"},{name:"Arapaja"},{name:"Felele"},{name:"Ajinde"},{name:"Odo ona"},{name:"Oke ado"},{name:"Oleyo"},{name:"Liberty"},{name:"Abese"},{name:"Elebu"},{name:"Odo oba"},{name:"Boluwaji"},{name:"Academy"}]},{name:"Dugbe",serviceCentres:[{name:"Bodija-Dugbe"},{name:"Eleyele"},{name:"Ajibode"},{name:"Awotan"},{name:"Apete"},{name:"Mokola"},{name:"Agodi"},{name:"Foko"},{name:"Sango-Dugbe"},{name:"Jericho"}]},{name:"Apata",serviceCentres:[{name:"Omi adio"},{name:"Oluyole"},{name:"Eruwa"},{name:"Ologuneru"},{name:"Idi ishin"},{name:"BCGA"},{name:"Orisunmbare"}]}]},{name:"Oyo",businessHubs:[{name:"Akanran",serviceCentres:[{name:"Airport"},{name:"Oje"},{name:"Agugu"},{name:"Gbagi"},{name:"Gbaremu"},{name:"Sawmill"},{name:"Muslim"},{name:"Adegbayi"},{name:"Olorunsogo"},{name:"Olunde"},{name:"Akanran"},{name:"Soka"},{name:"Akinfenwa-Akanran"},{name:"Olomi"}]},{name:"Oyo",serviceCentres:[{name:"Ilora"},{name:"Awe"},{name:"Araromi"},{name:"Owode-Oyo"},{name:"Otu"},{name:"Jobele"},{name:"Erelu"},{name:"Isale oyo"},{name:"Oke ebo"},{name:"Oluwole"},{name:"Koso"},{name:"Okeho"},{name:"Sango-Oyo"},{name:"Ago are"},{name:"Ajegunle"}]},{name:"Ojoo",serviceCentres:[{name:"Iwo Road"},{name:"Akinyele"},{name:"Igbo oloyin"},{name:"Moniya"},{name:"Labi"},{name:"Aduloju"},{name:"Ashi"},{name:"Akingbile"},{name:"Bodija"},{name:"Orogun"},{name:"Bashorun"},{name:"Ojoo"}]},{name:"Monatan",serviceCentres:[{name:"Estate"},{name:"Akobo"},{name:"Adogba"},{name:"Hajj - Camp"},{name:"Olode"},{name:"Alakia"},{name:"Olorundaaba"},{name:"Oluwo"},{name:"Kajola"},{name:"Olodo"},{name:"Papa"},{name:"Labo"},{name:"Yawiri"},{name:"Lalupon"},{name:"Wakajaiye"}]}]},{name:"Osun",businessHubs:[{name:"Ilesa",serviceCentres:[{name:"Osu"},{name:"Ipetu"},{name:"Isare"},{name:"Ilaje"},{name:"Esa-oke"},{name:"Isokun"},{name:"Ijebu jesha"},{name:"Efon alaye"},{name:"Imo"},{name:"Ibokun"}]},{name:"Ikirun",serviceCentres:[{name:"Iragbiji"},{name:"Inisa"},{name:"Okuku"},{name:"Odofun"},{name:"Eweta"}]}]},{name:"Kwara",businessHubs:[{name:"Challenge",serviceCentres:[{name:"Agba"},{name:"GRA-Challenge"},{name:"Ero omo"},{name:"Olunlade"},{name:"Ganmo"},{name:"Irewolede"},{name:"Tanke"}]},{name:"Ogbomoso",serviceCentres:[{name:"Takie"},{name:"Ojagbo"},{name:"Owode-Ogbomoso"},{name:"Ilorin road"},{name:"Odooba"},{name:"High school"}]},{name:"Omu-Aran",serviceCentres:[{name:"Iloffa"},{name:"Orita-Merin"},{name:"Idi-Ogun"},{name:"Oro"},{name:"Owode-Omuaran"},{name:"Omu-Aran"},{name:"Egbe"}]},{name:"Baboko",serviceCentres:[{name:"Shao"},{name:"Oyun"},{name:"Alagbado"},{name:"Aiyetoro"},{name:"Unity"},{name:"Surulere"},{name:"Alore"},{name:"Kishi"},{name:"Taiwo"},{name:"Otte"}]},{name:"Jebba",serviceCentres:[{name:"Share"},{name:"Jebba"},{name:"New bussa"},{name:"Mokwa"}]}]}];var $=()=>({width:"50vw"}),ee=()=>({"1199px":"75vw","575px":"90vw"});function ne(u,oe){if(u&1){let o=k();i(0,"p-dropdown",21),m("ngModelChange",function(e){O(o);let a=C();return d(a.approval_status,e)||(a.approval_status=e),A(e)}),r()}if(u&2){let o=C();p("options",o.statuses),l("ngModel",o.approval_status)}}var ae=(()=>{class u{constructor(o,t,e,a){this.service=o,this.userService=t,this.datePipe=e,this.messageService=a,this.display=!1,this.statusVisible=!1,this.filterApplied=new y,this.clearFiltersEvent=new y,this.closeFiltersEvent=new y,this.loading=!1,this.regions=b,this.businessHubs=[],this.serviceCenters=[],this.statuses=["Approved","Rejected","Awaiting review","Reviewed"],this.userList=[],this.region="",this.business_hub="",this.service_center="",this.date_created_from=null,this.date_created_to=null,this.approval_status="",this.approved_by="",this.reviewed_by="",this.created_by="",this.application_date_from="",this.application_date_to="",this.setup_date_from="",this.setup_date_to=""}ngOnInit(){this.listUsers()}getBusinessHubsByRegion(o){let t=b.find(e=>e.name.toLowerCase()===o.toLowerCase());return t?t.businessHubs:[]}getServiceCentresByBusinessHub(o){for(let t of b){let e=t.businessHubs.find(a=>a.name.toLowerCase()===o.toLowerCase());if(e)return e.serviceCentres}return[]}onRegionChange(o){this.businessHubs=this.getBusinessHubsByRegion(o)}onBusinessHubChange(o){this.serviceCenters=this.getServiceCentresByBusinessHub(o)}clearFilters(){this.formControls.forEach(o=>o.reset()),this.clearFiltersEvent.emit()}download(){let o={};this.formControls.forEach(e=>{let a=e.name,n=e.value;n&&(a==="date_created_from"||a==="date_created_to"||a==="applidation_date_from"||a==="applidation_date_to"||a==="setup_date_from"||a==="setup_date_to"?o[a]=this.datePipe.transform(n,"yyyy-MM-dd"):o[a]=n)});let t=new URLSearchParams(o).toString();this.loading=!0,this.service.scheduleReportDownload(t).subscribe(e=>{e.code==200&&e.status=="Success"&&(this.messageService.add({severity:"success",summary:"Download Scheduled",detail:"Your report download has been scheduled successfully."}),this.loading=!1)},e=>{console.error("Error filtering customers:",e),this.loading=!1})}onDialogClose(){this.closeFiltersEvent.emit(!1)}listUsers(){this.userService.getUserList(1,150).subscribe(o=>{o.code==200&&o.status==="Success"&&(this.userList=o?.data?.results)},o=>{this.loading=!1,this.filterApplied.emit({})})}onFilterButtonClick(){let o={};this.formControls.forEach(e=>{let a=e.name,n=e.value;n&&(a==="date_created_from"||a==="date_created_to"||a==="applidation_date_from"||a==="applidation_date_to"||a==="setup_date_from"||a==="setup_date_to"?o[a]=this.datePipe.transform(n,"yyyy-MM-dd"):o[a]=n)});let t=new URLSearchParams(o).toString();this.loading=!0,this.service.filterAll(t).subscribe(e=>{e.code==200&&e.status=="Success"&&(this.filterApplied.emit(e.data),this.loading=!1)},e=>{console.error("Error filtering customers:",e),this.loading=!1,this.filterApplied.emit({})})}showDialog(){this.display=!0}hideDialog(){this.clearFilters()}static{this.\u0275fac=function(t){return new(t||u)(c(Z),c(X),c(_),c(f))}}static{this.\u0275cmp=v({type:u,selectors:[["app-filter"]],viewQuery:function(t,e){if(t&1&&I(h,5),t&2){let a;W(a=B())&&(e.formControls=a)}},inputs:{display:"display",statusVisible:"statusVisible"},outputs:{filterApplied:"filterApplied",clearFiltersEvent:"clearFiltersEvent",closeFiltersEvent:"closeFiltersEvent"},features:[L([_])],decls:25,vars:35,consts:[["header","Advance Filter","showEffect","fade",3,"visibleChange","onHide","visible","modal","position","breakpoints","draggable","resizable"],[1,"p-fluid"],[1,"flex","align-items-center","gap-3","mb-3"],["name","region","placeholder","Region","optionValue","name","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","onChange","options","ngModel"],["name","businessHub","placeholder","Business Hub","optionValue","name","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","onChange","options","ngModel"],["name","serviceCenter","placeholder","Service Center","optionValue","name","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","options","ngModel"],["name","approval_status","placeholder","Status","class","flex-1","appendTo","body",3,"options","ngModel","ngModelChange",4,"ngIf"],["name","date_created_from","placeholder","Created From","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],["name","date_created_to","placeholder","Created To","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],["name","application_date_from","placeholder","Application From","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],["name","application_date_to","placeholder","Application To","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],["name","approved_by","placeholder","Approved By","optionValue","uid","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","options","ngModel"],["name","created_by","placeholder","Created By","optionValue","uid","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","options","ngModel"],["name","reviewed_by","placeholder","Reviewed By","optionValue","uid","optionLabel","name","appendTo","body",1,"flex-1",3,"ngModelChange","options","ngModel"],[1,"flex","align-items-center","gap-3","mb-5"],["name","setup_date_from","placeholder","Setup From","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],["name","setup_date_to","placeholder","Setup To","appendTo","body",1,"flex-1",3,"ngModelChange","ngModel"],[1,"flex","justify-content-end","gap-2"],["label","Search","severity","secondary",3,"onClick","loading","outlined"],["label","Clear","severity","secondary",3,"onClick","loading","text"],["label","Schedule Download","severity","secondary",3,"onClick","loading","text"],["name","approval_status","placeholder","Status","appendTo","body",1,"flex-1",3,"ngModelChange","options","ngModel"]],template:function(t,e){t&1&&(i(0,"p-dialog",0),m("visibleChange",function(n){return d(e.display,n)||(e.display=n),n}),g("onHide",function(){return e.onDialogClose()}),i(1,"div",1)(2,"div",2)(3,"p-dropdown",3),m("ngModelChange",function(n){return d(e.region,n)||(e.region=n),n}),g("onChange",function(n){return e.onRegionChange(n.value)}),r(),i(4,"p-dropdown",4),m("ngModelChange",function(n){return d(e.business_hub,n)||(e.business_hub=n),n}),g("onChange",function(n){return e.onBusinessHubChange(n.value)}),r(),i(5,"p-dropdown",5),m("ngModelChange",function(n){return d(e.service_center,n)||(e.service_center=n),n}),r()(),i(6,"div",2),F(7,ne,1,2,"p-dropdown",6),i(8,"p-calendar",7),m("ngModelChange",function(n){return d(e.date_created_from,n)||(e.date_created_from=n),n}),r(),i(9,"p-calendar",8),m("ngModelChange",function(n){return d(e.date_created_to,n)||(e.date_created_to=n),n}),r()(),i(10,"div",2)(11,"p-calendar",9),m("ngModelChange",function(n){return d(e.application_date_from,n)||(e.application_date_from=n),n}),r(),i(12,"p-calendar",10),m("ngModelChange",function(n){return d(e.application_date_to,n)||(e.application_date_to=n),n}),r(),i(13,"p-dropdown",11),m("ngModelChange",function(n){return d(e.approved_by,n)||(e.approved_by=n),n}),r()(),i(14,"div",2)(15,"p-dropdown",12),m("ngModelChange",function(n){return d(e.created_by,n)||(e.created_by=n),n}),r(),i(16,"p-dropdown",13),m("ngModelChange",function(n){return d(e.reviewed_by,n)||(e.reviewed_by=n),n}),r()(),i(17,"div",14)(18,"p-calendar",15),m("ngModelChange",function(n){return d(e.setup_date_from,n)||(e.setup_date_from=n),n}),r(),i(19,"p-calendar",16),m("ngModelChange",function(n){return d(e.setup_date_to,n)||(e.setup_date_to=n),n}),r()()(),i(20,"div",17)(21,"p-button",18),g("onClick",function(){return e.onFilterButtonClick()}),r(),i(22,"p-button",19),g("onClick",function(){return e.clearFilters()}),r(),i(23,"p-button",20),g("onClick",function(){return e.download()}),r()(),T(24,"p-toast"),r()),t&2&&(E(w(33,$)),l("visible",e.display),p("modal",!1)("position","top")("breakpoints",w(34,ee))("draggable",!1)("resizable",!1),s(3),p("options",e.regions),l("ngModel",e.region),s(),p("options",e.businessHubs),l("ngModel",e.business_hub),s(),p("options",e.serviceCenters),l("ngModel",e.service_center),s(2),p("ngIf",e.statusVisible),s(),l("ngModel",e.date_created_from),s(),l("ngModel",e.date_created_to),s(2),l("ngModel",e.application_date_from),s(),l("ngModel",e.application_date_to),s(),p("options",e.userList),l("ngModel",e.approved_by),s(2),p("options",e.userList),l("ngModel",e.created_by),s(),p("options",e.userList),l("ngModel",e.reviewed_by),s(2),l("ngModel",e.setup_date_from),s(),l("ngModel",e.setup_date_to),s(2),p("loading",e.loading)("outlined",!0),s(),p("loading",e.loading)("text",!0),s(),p("loading",e.loading)("text",!0))},dependencies:[j,H,h,q,K,V,U,z],styles:[".table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0}.customer-records[_ngcontent-%COMP%]{font-weight:700}.group-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})}}return u})();var Be=(()=>{class u{static{this.\u0275fac=function(t){return new(t||u)}}static{this.\u0275mod=S({type:u})}static{this.\u0275inj=M({providers:[_,f],imports:[P,D,R,J,Q,N,G,Y]})}}return u})();export{b as a,ae as b,Be as c};
