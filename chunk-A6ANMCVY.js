import{a as te,b as oe}from"./chunk-DFYT2OQB.js";import{b as ee}from"./chunk-WXZQG76U.js";import{b as Z}from"./chunk-JK2WCNHE.js";import{e as O,q as V}from"./chunk-B2LPOMVQ.js";import"./chunk-FJZWMPVK.js";import{b as q}from"./chunk-EYNK32OA.js";import"./chunk-BL7XLXFW.js";import"./chunk-Y2TWHHJT.js";import{b as A}from"./chunk-SDXV7PTX.js";import{a as X}from"./chunk-DBPQRKMF.js";import"./chunk-SXPLR5LF.js";import"./chunk-BUAUGQZJ.js";import{a as Y}from"./chunk-FIIS3JHD.js";import"./chunk-6YX36K4P.js";import{e as L,f as H,g as z,h as $,j as J,k as K}from"./chunk-GKUFW2RI.js";import{a as j}from"./chunk-D6OM4TL4.js";import{c as W}from"./chunk-UNZMK42Y.js";import"./chunk-VZKXXVR6.js";import"./chunk-FJW7QSLR.js";import{a as E}from"./chunk-HDDFEM7G.js";import{d as G,n as U}from"./chunk-VTKS6MIP.js";import"./chunk-XVURSSVY.js";import"./chunk-KMIFLFRM.js";import"./chunk-5TMXRYYI.js";import{h as B}from"./chunk-JSMWOMP6.js";import"./chunk-5Q75OANQ.js";import{$ as f,Ab as T,Db as N,Ja as M,Mc as R,Q as a,R as p,Ub as v,Vb as D,ba as d,cb as b,db as I,ea as x,ha as r,hc as F,ia as i,ib as S,ja as C,pa as g,s as h,sc as Q,vc as P,x as y,y as k,ya as m,yb as w,za as l}from"./chunk-AWEHUNTX.js";import"./chunk-DM275RSA.js";function se(e,s){if(e&1&&(r(0,"div",5)(1,"span"),m(2),i()()),e&2){let t=g();a(2),l(t.newData)}}function de(e,s){if(e&1&&(r(0,"div",6)(1,"span"),m(2),i()()),e&2){let t=g();a(2),l(t.existingData)}}function le(e,s){e&1&&(r(0,"div",7)(1,"span"),m(2,"N/A"),i()())}function ce(e,s){e&1&&(r(0,"div",8)(1,"span"),m(2,"N/A"),i()())}var ne=(()=>{class e{constructor(){this.newData=null,this.existingData=null}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-customer-details-qrcode-field"]],inputs:{fieldName:"fieldName",newData:"newData",existingData:"existingData"},decls:7,vars:5,consts:[[1,"field-container"],["class","data new-data",4,"ngIf"],["class","data existing-data",4,"ngIf"],["class","data no-data",4,"ngIf"],["class","data no-data-exist",4,"ngIf"],[1,"data","new-data"],[1,"data","existing-data"],[1,"data","no-data"],[1,"data","no-data-exist"]],template:function(o,n){o&1&&(r(0,"div",0)(1,"label"),m(2),i(),f(3,se,3,1,"div",1)(4,de,3,1,"div",2)(5,le,3,0,"div",3)(6,ce,3,0,"div",4),i()),o&2&&(a(2),l(n.fieldName),a(),d("ngIf",n.newData&&n.newData!==""),a(),d("ngIf",n.existingData&&n.existingData!==""),a(),d("ngIf",!n.newData||n.newData===""),a(),d("ngIf",!n.existingData||n.existingData===""))},dependencies:[I],styles:[".field-container[_ngcontent-%COMP%]{margin-bottom:1rem}.label[_ngcontent-%COMP%]{font-weight:700}.data[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;margin-top:.5rem}.new-data[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{background-color:#e0ffe0}.existing-data[_ngcontent-%COMP%], .no-data-exist[_ngcontent-%COMP%]{background-color:#f0f0f0}.empty-data[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;margin-top:.5rem;background-color:#f0f0f0}"]})}}return e})();var pe=e=>({"background-color":e});function fe(e,s){if(e&1&&(r(0,"div",8),C(1,"app-customer-details-qrcode-field",9),i()),e&2){let t=s.$implicit,o=g();a(),d("fieldName",t.name)("newData",o.newData&&(o.newData[t.key]==null?null:o.newData[t.key].toString())||null)("existingData",o.existingData&&(o.existingData[t.key]==null?null:o.existingData[t.key].toString())||null)}}function ge(e,s){if(e&1&&(r(0,"span",10),C(1,"i",11),i()),e&2){let t=s.$implicit;x(M(2,pe,t.status==="Rejected"?"#ff0000":"#00ff00"))}}function ye(e,s){if(e&1&&(r(0,"div",12)(1,"p",13)(2,"b"),m(3,"Category: "),i(),m(4),i(),r(5,"p",13)(6,"b"),m(7,"Status: "),i(),m(8),i(),r(9,"p",13)(10,"b"),m(11,"Description: "),i(),m(12),i(),r(13,"p",13)(14,"b"),m(15,"Posted by: "),i(),m(16),i()()),e&2){let t=s.$implicit;a(4),l(t.category),a(4),l(t.status),a(4),l(t.description),a(4),l(t.posted_by.name)}}var ae=(()=>{class e{constructor(t,o,n,c){this.customerService=t,this.route=o,this.router=n,this.authService=c,this.customerId="",this.customerNo="",this.customer=null,this.newData=null,this.existingData=null,this.events=null,this.dataEntryHistory=[],this.qrCode=null,this.customerFields=[{name:"Customer Full Name",key:"customer_full_name"},{name:"Account Number",key:"account_no"},{name:"Meter Number",key:"meter_no"},{name:"Address",key:"address"},{name:"City",key:"city"},{name:"LGA",key:"lga"},{name:"State",key:"state"},{name:"Nearest Landmark",key:"nearest_landmark"},{name:"Setup Date",key:"setup_date"},{name:"Latitude",key:"latitude"},{name:"Longitude",key:"longitude"},{name:"Customer ID",key:"customer_id"},{name:"CIN",key:"cin"},{name:"Application Date",key:"application_date"},{name:"Mobile Number",key:"mobile"},{name:"Email",key:"email"},{name:"Status Code",key:"status_code"},{name:"Account Type",key:"account_type"},{name:"Current Tariff Code",key:"current_tariff_code"},{name:"Correct Tariff Code",key:"correct_tariff_code"},{name:"Tariff Class",key:"tariff_class"},{name:"Feeder",key:"feeder"},{name:"Feeder ID",key:"feeder_id"},{name:"Service Center",key:"service_center"},{name:"Distribution Name",key:"distribution_name"},{name:"DSS ID",key:"dss_id"},{name:"LT Pole ID",key:"lt_pole_id"},{name:"Service Wire",key:"service_wire"},{name:"Upriser",key:"upriser"},{name:"Region",key:"region"},{name:"Business Hub",key:"business_hub"},{name:"Account Category",key:"account_category"},{name:"Connection Type",key:"connection_type"},{name:"Customer's Nature of Business",key:"cust_nature_of_business"},{name:"Customer NIN",key:"customer_nin"},{name:"Customer Supply Type",key:"customer_supply_type"},{name:"Customer Estimated Load",key:"customer_estimated_load"},{name:"Customer Has Meter",key:"cust_has_meter"},{name:"Customer Meter Category",key:"customer_meter_category"},{name:"Customer Meter Manufacturer",key:"customer_meter_manufacturer"},{name:"Customer Meter Sealed",key:"customer_meter_saled"},{name:"Customer Meter Accessible",key:"customer_meter_accessible"},{name:"Customer Meter Location",key:"customer_meter_location"},{name:"Customer Bill Name",key:"customer_bill_name"},{name:"Customer Has Account Number",key:"customer_has_account_no"},{name:"Customer Group",key:"customer_group"},{name:"Is Landlord",key:"is_landlord"},{name:"Landlord Name",key:"landlord_name"},{name:"Landlord Phone",key:"landlord_phone"},{name:"Tenant Name",key:"tenant_name"},{name:"Tenant Phone",key:"tenant_phone"},{name:"Meter CT Ratio",key:"meter_ct_ratio"}]}ngOnInit(){let t=this.route.snapshot.paramMap.get("uid");this.customerId=t||"",this.loadCustomerDetails(this.customerId),console.log(this.customerId),console.log(t)}loadCustomerDetails(t){if(!this.authService.getToken()){console.error("No authentication token found. Please log in again.");return}this.customerId&&this.customerService.getCustomerById(t).subscribe(n=>{if(console.log("API response:",n),n.code===200){let{new:c,old:re}=n.data;this.newData=c,this.existingData=re,this.events=c.events,this.dataEntryHistory=this.events.map(u=>({description:u.description,color:u.status==="Rejected"?"#ff0000":"#00ff00",category:u.category,status:u.status,date:u.date_created,icon:"pi pi-info-circle"}));let _=c.customer_no;_?(this.loadQrCode(_),console.log(_)):console.error("Customer number is not available."),console.log("New Data:",this.newData),console.log("Existing Data:",this.existingData),console.log("Event:",this.events)}},n=>{console.error("Error fetching customer data:",n)})}loadQrCode(t){this.customerService.getCustomerQrCode(t).subscribe({next:o=>{o.code===200?(this.qrCode=o.data?.qr_code,console.log("QR Code URL:",this.qrCode)):(console.error("Failed to fetch QR code:",o.message||o),alert("Failed to retrieve the QR code. Please try again."))},error:o=>{console.error("Error retrieving QR code:",o)}})}goBack(){window.history.back()}static{this.\u0275fac=function(o){return new(o||e)(p(X),p(w),p(T),p(E))}}static{this.\u0275cmp=y({type:e,selectors:[["app-customer-details-qrcode"]],decls:11,vars:2,consts:[[1,"customer-details-container"],[1,"grid"],[1,"col-12","md:col-8"],["class","col-12 md:col-6",4,"ngFor","ngForOf"],[1,"col-12","md:col-4"],["align","alternate","styleClass","customized-timeline",3,"value"],["pTemplate","marker"],["pTemplate","content"],[1,"col-12","md:col-6"],[3,"fieldName","newData","existingData"],[1,"flex","w-2rem","h-2rem","align-items-center","justify-content-center","text-white","border-circle","z-1","shadow-1"],[1,"pi","pi-inbox"],[1,"card","w-100%"],[1,"text-xs"]],template:function(o,n){o&1&&(r(0,"div",0)(1,"h2"),m(2,"Customer Details"),i(),r(3,"div",1)(4,"div",2)(5,"div",1),f(6,fe,2,3,"div",3),i()(),r(7,"div",4)(8,"p-timeline",5),f(9,ge,2,4,"ng-template",6)(10,ye,17,4,"ng-template",7),i()()()()),o&2&&(a(6),d("ngForOf",n.customerFields),a(2),d("value",n.events))},dependencies:[b,F,te,ne],styles:[".custom-header[_ngcontent-%COMP%]{font-size:1.5rem;color:#007ad9;font-weight:700;padding:10px}.custom-subheader[_ngcontent-%COMP%]{font-size:1rem;color:gray;font-style:italic;padding-bottom:5px}.customer-details-container[_ngcontent-%COMP%]{padding:30px 50px}"]})}}return e})();var _e=[{path:":uid",component:ae}],Ye=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=k({type:e})}static{this.\u0275inj=h({imports:[S,U,A,P,O,ee,R,V,oe,Y,Q,H,q,B,Z,j,W,$,z,L,G,D,v,J,K,N.forChild(_e),D,v]})}}return e})();export{Ye as CustomerDetailsQrcodeModule,_e as customerDetailsQrcodeRoutes};
