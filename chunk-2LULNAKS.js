import{a as R}from"./chunk-UJ67OLA3.js";import{b as Z}from"./chunk-FJZWMPVK.js";import{b as $}from"./chunk-EYNK32OA.js";import{a as X}from"./chunk-Y2TWHHJT.js";import{a as ie}from"./chunk-FDQ6KAAT.js";import{a as ee,b as te}from"./chunk-6YX36K4P.js";import"./chunk-D6OM4TL4.js";import"./chunk-VZKXXVR6.js";import"./chunk-LHYMOAVA.js";import"./chunk-KMIFLFRM.js";import{h as Y}from"./chunk-JSMWOMP6.js";import{$ as h,Aa as E,Ab as I,Ca as p,D as u,Da as _,Db as N,E as c,Ea as g,Fb as P,Gb as v,Ib as B,Jb as k,Lc as H,Mc as Q,Nb as D,Ob as L,Pb as A,Q as a,Qb as F,R as x,Rb as j,Tb as O,Ub as U,Vb as G,ba as d,db as W,ha as n,ia as r,ib as w,ic as K,ja as b,na as C,oa as y,pa as m,s as V,sc as q,tc as J,vc as z,x as S,y as T,ya as l,za as M}from"./chunk-AWEHUNTX.js";import"./chunk-DM275RSA.js";function oe(s,f){s&1&&(n(0,"label",34),l(1,"Meter No"),r())}function ae(s,f){s&1&&(n(0,"label",34),l(1,"Account No"),r())}function le(s,f){if(s&1&&(n(0,"div",31),h(1,oe,2,0,"label",32)(2,ae,2,0,"label",32),b(3,"input",33),r()),s&2){let t=m();a(),d("ngIf",t.meterVisibility),a(),d("ngIf",t.accountVisibility)}}function de(s,f){if(s&1&&(n(0,"div",2),b(1,"button",37),r()),s&2){let t=m(2);a(),d("loading",t.loading)("disabled",!t.modeForm.valid||t.isError)}}function se(s,f){if(s&1){let t=C();n(0,"div",2)(1,"button",38),y("click",function(){u(t);let e=m(2);return c(e.newValidate())}),r()()}if(s&2){let t=m(2);a(),d("loading",t.loading)}}function me(s,f){if(s&1&&(n(0,"div",35)(1,"div",9),h(2,de,2,2,"div",36)(3,se,2,1,"div",36),r()()),s&2){let t=m();a(2),d("ngIf",t.isNewAccount),a(),d("ngIf",t.isError||!t.isNewAccount)}}function ue(s,f){if(s&1&&(n(0,"div",39)(1,"span",40),l(2),r()()),s&2){let t=m();a(2),M(t.errorMessage)}}function ce(s,f){if(s&1&&(n(0,"div",41)(1,"span",42),l(2),r()()),s&2){let t=m();a(2),M(t.successMessage)}}function pe(s,f){if(s&1){let t=C();n(0,"div",43)(1,"div",31)(2,"label",44),l(3,"Customer Name"),r(),n(4,"input",45),g("ngModelChange",function(e){u(t);let i=m();return _(i.customer_name,e)||(i.customer_name=e),c(e)}),r()(),n(5,"div",31)(6,"label",46),l(7,"Address"),r(),n(8,"input",47),g("ngModelChange",function(e){u(t);let i=m();return _(i.address,e)||(i.address=e),c(e)}),r()(),n(9,"div",31)(10,"label",48),l(11,"Meter Number"),r(),n(12,"input",49),g("ngModelChange",function(e){u(t);let i=m();return _(i.meter_number,e)||(i.meter_number=e),c(e)}),r()(),n(13,"div",31)(14,"label",50),l(15,"Account Number"),r(),n(16,"input",51),g("ngModelChange",function(e){u(t);let i=m();return _(i.account_number,e)||(i.account_number=e),c(e)}),r()(),n(17,"div",31)(18,"label",52),l(19,"Business Unit"),r(),n(20,"input",53),g("ngModelChange",function(e){u(t);let i=m();return _(i.business_unit,e)||(i.business_unit=e),c(e)}),r()(),n(21,"div",31)(22,"label",54),l(23,"Undertaking"),r(),n(24,"input",55),g("ngModelChange",function(e){u(t);let i=m();return _(i.undertaking,e)||(i.undertaking=e),c(e)}),r()(),n(25,"div",31)(26,"label",56),l(27,"Phone Number"),r(),n(28,"input",57),g("ngModelChange",function(e){u(t);let i=m();return _(i.phone_number,e)||(i.phone_number=e),c(e)}),r()(),n(29,"div",31)(30,"label",58),l(31,"Email"),r(),n(32,"input",59),g("ngModelChange",function(e){u(t);let i=m();return _(i.email,e)||(i.email=e),c(e)}),r()(),n(33,"div",31)(34,"label",60),l(35,"Business Unit ID"),r(),n(36,"input",61),g("ngModelChange",function(e){u(t);let i=m();return _(i.business_unit_id,e)||(i.business_unit_id=e),c(e)}),r()(),n(37,"div",31)(38,"label",62),l(39,"Last Transaction Date"),r(),n(40,"input",63),g("ngModelChange",function(e){u(t);let i=m();return _(i.last_transaction_date,e)||(i.last_transaction_date=e),c(e)}),r()(),n(41,"div",31)(42,"label",64),l(43,"Minimum Purchase"),r(),n(44,"input",65),g("ngModelChange",function(e){u(t);let i=m();return _(i.minimum_purchase,e)||(i.minimum_purchase=e),c(e)}),r()(),n(45,"div",31)(46,"label",66),l(47,"Tariff Code"),r(),n(48,"input",67),g("ngModelChange",function(e){u(t);let i=m();return _(i.tariff_code,e)||(i.tariff_code=e),c(e)}),r()(),n(49,"div",31)(50,"label",68),l(51,"Customer Arrears"),r(),n(52,"input",69),g("ngModelChange",function(e){u(t);let i=m();return _(i.customer_arrears,e)||(i.customer_arrears=e),c(e)}),r()(),n(53,"div",31)(54,"label",70),l(55,"Tariff"),r(),n(56,"input",71),g("ngModelChange",function(e){u(t);let i=m();return _(i.tariff,e)||(i.tariff=e),c(e)}),r()(),n(57,"div",31)(58,"label",72),l(59,"Service Band"),r(),n(60,"input",73),g("ngModelChange",function(e){u(t);let i=m();return _(i.service_band,e)||(i.service_band=e),c(e)}),r()(),n(61,"div",31)(62,"label",74),l(63,"Feeder Name"),r(),n(64,"input",75),g("ngModelChange",function(e){u(t);let i=m();return _(i.feeder_name,e)||(i.feeder_name=e),c(e)}),r()(),n(65,"div",31)(66,"label",76),l(67,"DSS Name"),r(),n(68,"input",77),g("ngModelChange",function(e){u(t);let i=m();return _(i.dss_name,e)||(i.dss_name=e),c(e)}),r()(),n(69,"div",31)(70,"label",78),l(71,"Band Adjustment"),r(),n(72,"input",79),g("ngModelChange",function(e){u(t);let i=m();return _(i.band_adjustment,e)||(i.band_adjustment=e),c(e)}),r()(),n(73,"div",31)(74,"label",80),l(75,"TIN"),r(),n(76,"input",81),g("ngModelChange",function(e){u(t);let i=m();return _(i.tin,e)||(i.tin=e),c(e)}),r()(),n(77,"div",31)(78,"label",82),l(79,"KRN1"),r(),n(80,"input",83),g("ngModelChange",function(e){u(t);let i=m();return _(i.krn1,e)||(i.krn1=e),c(e)}),r()(),n(81,"div",31)(82,"label",84),l(83,"KRN2"),r(),n(84,"input",85),g("ngModelChange",function(e){u(t);let i=m();return _(i.krn2,e)||(i.krn2=e),c(e)}),r()(),n(85,"div",31)(86,"label",86),l(87,"Tariff ID"),r(),n(88,"input",87),g("ngModelChange",function(e){u(t);let i=m();return _(i.tariff_id,e)||(i.tariff_id=e),c(e)}),r()(),n(89,"div",31)(90,"label",88),l(91,"SGC"),r(),n(92,"input",89),g("ngModelChange",function(e){u(t);let i=m();return _(i.sgc,e)||(i.sgc=e),c(e)}),r()(),n(93,"div",31)(94,"label",90),l(95,"Old TI"),r(),n(96,"input",91),g("ngModelChange",function(e){u(t);let i=m();return _(i.old_ti,e)||(i.old_ti=e),c(e)}),r()(),n(97,"div",31)(98,"label",92),l(99,"Old SGC"),r(),n(100,"input",93),g("ngModelChange",function(e){u(t);let i=m();return _(i.old_sgc,e)||(i.old_sgc=e),c(e)}),r()()()}if(s&2){let t=m();a(4),p("ngModel",t.customer_name),d("disabled",!0),a(4),p("ngModel",t.address),d("disabled",!0),a(4),p("ngModel",t.meter_number),d("disabled",!0),a(4),p("ngModel",t.account_number),d("disabled",!0),a(4),p("ngModel",t.business_unit),d("disabled",!0),a(4),p("ngModel",t.undertaking),d("disabled",!0),a(4),p("ngModel",t.phone_number),d("disabled",!0),a(4),p("ngModel",t.email),d("disabled",!0),a(4),p("ngModel",t.business_unit_id),d("disabled",!0),a(4),p("ngModel",t.last_transaction_date),d("disabled",!0),a(4),p("ngModel",t.minimum_purchase),d("disabled",!0),a(4),p("ngModel",t.tariff_code),d("disabled",!0),a(4),p("ngModel",t.customer_arrears),d("disabled",!0),a(4),p("ngModel",t.tariff),d("disabled",!0),a(4),p("ngModel",t.service_band),d("disabled",!0),a(4),p("ngModel",t.feeder_name),d("disabled",!0),a(4),p("ngModel",t.dss_name),d("disabled",!0),a(4),p("ngModel",t.band_adjustment),d("disabled",!0),a(4),p("ngModel",t.tin),d("disabled",!0),a(4),p("ngModel",t.krn1),d("disabled",!0),a(4),p("ngModel",t.krn2),d("disabled",!0),a(4),p("ngModel",t.tariff_id),d("disabled",!0),a(4),p("ngModel",t.sgc),d("disabled",!0),a(4),p("ngModel",t.old_ti),d("disabled",!0),a(4),p("ngModel",t.old_sgc),d("disabled",!0)}}var ne=(()=>{class s{constructor(t,o,e,i){this.fb=t,this.sharedDataService=o,this.customerService=e,this.router=i,this.accountVisibility=!1,this.meterVisibility=!1,this.buttonVisibility=!1,this.customerDetailsVisibility=!1,this.errorVisibility=!1,this.sucessVisibility=!1,this.isError=!1,this.loading=!1,this.url="",this.errorMessage="",this.successMessage="",this.name="",this.customer_name="",this.address="",this.meter_number="",this.account_number="",this.business_unit="",this.undertaking="",this.phone_number="",this.email="",this.business_unit_id="",this.last_transaction_date="",this.minimum_purchase=null,this.tariff_code="",this.customer_arrears=null,this.tariff="",this.service_band="",this.feeder_name="",this.dss_name="",this.band_adjustment=null,this.tin="",this.krn1="",this.krn2="",this.tariff_id=null,this.sgc="",this.old_ti=null,this.old_sgc="",this.previousItemNo=null,this.code=0}ngOnInit(){this.modeForm=this.fb.group({selectMode:["",v.required],meterNo:["",[v.required]]}),this.formVisbilityCheck();let t=localStorage.getItem("userData");if(t){let o=JSON.parse(t);this.name=o.name||"Guest",console.log("Data from localStorage:",this.name)}else this.sharedDataService.userData$.subscribe(o=>{o&&(localStorage.setItem("userData",JSON.stringify(o)),this.name=o.name||"Guest",console.log("Data from SharedDataService:",this.name))})}ngOnDestroy(){localStorage.removeItem("userData"),console.log("userData cleared from localStorage")}formVisbilityCheck(){this.modeForm.get("selectMode")?.valueChanges.subscribe(t=>{this.resetVisibility(),t==="Prepaid"?(this.meterVisibility=!0,this.buttonVisibility=!0):t==="Postpaid"&&(this.accountVisibility=!0,this.buttonVisibility=!0)})}resetVisibility(){this.meterVisibility=!1,this.accountVisibility=!1,this.buttonVisibility=!1}populateCustomerDetails(t){this.customer_name=t.customer_name,this.address=t.address,this.meter_number=t.meter_number,this.account_number=t.account_number,this.business_unit=t.business_unit,this.undertaking=t.undertaking,this.phone_number=t.phone_number,this.email=t.email,this.business_unit_id=t.business_unit_id,this.last_transaction_date=t.last_transaction_date,this.minimum_purchase=Number(t.minimum_purchase),this.tariff_code=t.tariff_code,this.customer_arrears=Number(t.customer_arrears),this.tariff=t.tariff,this.service_band=t.service_band,this.feeder_name=t.feeder_name,this.dss_name=t.dss_name,this.band_adjustment=Number(t.band_adjustment),this.tin=t.tin,this.krn1=t.krn1,this.krn2=t.krn2,this.tariff_id=t.tariff_id,this.sgc=t.sgc,this.old_ti=t.old_ti,this.old_sgc=t.old_sgc}onSubmit(){let t=this.modeForm.get("meterNo")?.value,o=this.modeForm.get("selectMode")?.value;if(!t||!o)return;this.previousItemNo=t,this.loading=!0;let e={account_type:o,item_number:t};this.customerService.draftValidate(e).subscribe(i=>{this.successMessage=i.data.message,this.customerDetailsVisibility=!0,this.sucessVisibility=!0,this.errorVisibility=!1,this.populateCustomerDetails(i.data.customer_draft),this.code=i.code,this.url=i.data.url,this.loading=!1,console.log(this.code)},i=>{console.error("Error during API call:",i),this.loading=!1,i.error.code==404?(this.errorVisibility=!0,this.errorMessage=i.error.errorMessage,this.sucessVisibility=!1,this.isError=!0):i.error.code==500&&(this.errorVisibility=!0,this.isError=!1,this.sucessVisibility=!1,this.errorMessage=i.error.errorMessage),console.log(this.errorMessage)})}onProceed(){window.location.href=this.url}newValidate(){if(this.loading=!0,this.code==200)this.redirectToUrl(),this.loading=!1;else{this.loading=!0;let t=this.modeForm.get("meterNo")?.value,o=this.modeForm.get("selectMode")?.value;if(console.log("Form Values:",{meterNo:t,accountType:o}),!t||!o){console.error("Form values are missing!");return}let e={account_type:o,item_number:t};this.customerService.draftNewValidate(e).subscribe(i=>{this.successMessage=i.data.message,this.url=i.data.url,this.sucessVisibility=!0,this.errorVisibility=!1,this.populateCustomerDetails(i.data.customer_draft),this.redirectToUrl(),console.log(this.url),this.loading=!1},i=>{console.error("Error during API call:",i)})}}get isNewAccount(){return this.modeForm.get("meterNo")?.value!=this.previousItemNo}redirectToUrl(){setTimeout(()=>{window.location.href=this.url},1e3)}logout(){localStorage.clear(),this.router.navigate(["/"])}static{this.\u0275fac=function(o){return new(o||s)(x(O),x(R),x(ie),x(I))}}static{this.\u0275cmp=S({type:s,selectors:[["app-customer-verification"]],decls:49,vars:10,consts:[[1,"contain"],[1,"grid","box-content","relative"],[1,"col-12"],[1,"flex","justify-content-center","gap-2","relative","md:fixed","flex-column","md:flex-row","text-welcome"],[1,"welcome","text-2xl","text-center"],[1,"text-2xl","text-center","-mt-4","md:mt-0",2,"color","blue"],[1,"md:col-6","col-12","hidden","image","md:flex","mt-3","relative","overflow-hidden"],["src","../../../assets/demo/images/ibec/world-pana.png","alt","",1,"mt-5","fixed"],[1,"md:col-6","col-12","h-full"],[1,"grid"],[1,"col-12","flex","justify-content-end"],["type","button","pButton","","label","Logout","severity","danger",3,"click","outlined"],[1,"col-12","flex","gap-2","mb-3","bg-white","shadow-1","border-round"],[1,"text-2xl","scale"],[1,"text-md"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"grid","bg-white","mb-2","border-round","shadow-2","mt-2"],[1,"grid","w-full"],[1,"col-12","ml-1"],["for",""],[1,"col-6","flex","align-items-center","-mt-3"],["name","selectMode","formControlName","selectMode","inputId","role1",3,"value"],["for","role1",1,"ml-2"],[1,"col-6","flex","align-items-center","pr-5","-mt-3"],["name","selectMode","formControlName","selectMode","inputId","role2",3,"value"],["for","role2",1,"ml-2"],["class","col-6 flex flex-column gap-2",4,"ngIf"],["class","col-6 mt-4 ",4,"ngIf"],["class","col-12  bg-red-200 mb-4 border-round ",4,"ngIf"],["class","col-12  bg-green-200 mb-4 border-round ",4,"ngIf"],["class","grid bg-white border-round mt-4 shadow-1",4,"ngIf"],[1,"col-6","flex","flex-column","gap-2"],["for","","class","ml-1",4,"ngIf"],["type","text","pInputText","","formControlName","meterNo"],["for","",1,"ml-1"],[1,"col-6","mt-4"],["class"," col-12",4,"ngIf"],["pButton","","label","Validate","severity","primary","type","submit",1,"w-full",3,"loading","disabled"],["pButton","","label","Proceed","type","button","severity","warning",1,"w-full",3,"click","loading"],[1,"col-12","bg-red-200","mb-4","border-round"],[2,"color","red"],[1,"col-12","bg-green-200","mb-4","border-round"],[2,"color","green"],[1,"grid","bg-white","border-round","mt-4","shadow-1"],["for","customerName"],["type","text","id","customerName","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","address"],["type","text","id","address","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","meterNumber"],["type","text","id","meterNumber","pInputText","",1,"w-full",3,"ngModelChange","ngModel","disabled"],["for","accountNumber"],["type","text","id","accountNumber","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","businessUnit"],["type","text","id","businessUnit","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","undertaking"],["type","text","id","undertaking","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","phoneNumber"],["type","tel","id","phoneNumber","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","email"],["type","email","id","email","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","businessUnitId"],["type","text","id","businessUnitId","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","lastTransactionDate"],["type","text","id","lastTransactionDate","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","minimumPurchase"],["type","number","id","minimumPurchase","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","tariffCode"],["type","text","id","tariffCode","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","customerArrears"],["type","number","id","customerArrears","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","tariff"],["type","text","id","tariff","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","serviceBand"],["type","text","id","serviceBand","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","feederName"],["type","text","id","feederName","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","dssName"],["type","text","id","dssName","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","bandAdjustment"],["type","number","id","bandAdjustment","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","tin"],["type","text","id","tin","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","krn1"],["type","text","id","krn1","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","krn2"],["type","text","id","krn2","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","tariffId"],["type","number","id","tariffId","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","sgc"],["type","text","id","sgc","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","oldTi"],["type","number","id","oldTi","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","oldSgc"],["type","text","id","oldSgc","pInputText","",3,"ngModelChange","ngModel","disabled"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),l(5,"WELCOME BACK, "),r(),n(6,"span",5),l(7),r()()(),n(8,"div",6),b(9,"img",7),r(),n(10,"div",8)(11,"div",9)(12,"div",10)(13,"button",11),y("click",function(){return e.logout()}),r()(),n(14,"div",12)(15,"span",13),l(16,"\u{1F4A1}"),r(),n(17,"span",14),l(18,"This verification form is designed for "),n(19,"b"),l(20,"IBEDC"),r(),l(21," customer validation. After verification, you will be redirected to the "),n(22,"b"),l(23,"ArcGIS Field Map"),r(),l(24," to proceed. Please ensure the Field Map app is installed on your device. To begin, select your "),n(25,"b"),l(26,"Account Type."),r()()()(),n(27,"form",15),y("ngSubmit",function(){return e.onSubmit()}),n(28,"div",16)(29,"div",2)(30,"div",17)(31,"div",18)(32,"label",19),l(33,"Account Type:"),r()(),n(34,"div",20),b(35,"p-radioButton",21),n(36,"label",22),l(37,"Prepaid"),r()(),n(38,"div",23),b(39,"p-radioButton",24),n(40,"label",25),l(41,"Postpaid"),r()()()(),n(42,"div",2)(43,"div",9),h(44,le,4,2,"div",26)(45,me,4,2,"div",27),r(),h(46,ue,3,1,"div",28)(47,ce,3,1,"div",29),r()()(),h(48,pe,101,50,"div",30),r()()()),o&2&&(a(7),E("",e.name," "),a(6),d("outlined",!0),a(14),d("formGroup",e.modeForm),a(8),d("value","Prepaid"),a(4),d("value","Postpaid"),a(5),d("ngIf",e.meterVisibility||e.accountVisibility),a(),d("ngIf",e.buttonVisibility),a(),d("ngIf",e.errorVisibility),a(),d("ngIf",e.sucessVisibility),a(),d("ngIf",e.customerDetailsVisibility))},dependencies:[W,L,P,A,B,k,D,J,H,F,j,ee],styles:[".box-content[_ngcontent-%COMP%]{padding:30px 60px}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:500px}@media (max-width: 1136px){.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}}.welcome[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.scale[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bola 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bola{0%{transform:scale(.5)}to{transform:scale(1)}}"]})}}return s})();var _e=[{path:"",component:ne}],Fe=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=T({type:s})}static{this.\u0275inj=V({imports:[w,N.forChild(_e),K,w,U,z,q,Q,Y,Z,$,G,te,X]})}}return s})();export{Fe as CustomerVerificationModule,_e as customerVerificationRoutes};
