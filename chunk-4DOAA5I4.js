import{a as O,b as B}from"./chunk-Y6XFFZQV.js";import{a as k}from"./chunk-XHMA7NUK.js";import{a as j}from"./chunk-DBPQRKMF.js";import{a as R,b as M,c as A}from"./chunk-SXPLR5LF.js";import{c as P}from"./chunk-BUAUGQZJ.js";import"./chunk-FJW7QSLR.js";import{a as w}from"./chunk-HDDFEM7G.js";import{n as D}from"./chunk-VTKS6MIP.js";import"./chunk-XVURSSVY.js";import"./chunk-KMIFLFRM.js";import"./chunk-5TMXRYYI.js";import"./chunk-JSMWOMP6.js";import"./chunk-5Q75OANQ.js";import{$ as g,Db as S,Mc as E,Q as o,R as m,ba as u,cb as b,ha as t,ia as r,ib as x,ic as C,ja as c,r as p,s as h,sa as n,sc as y,vc as I,x as f,y as v,ya as a,za as l}from"./chunk-AWEHUNTX.js";import"./chunk-DM275RSA.js";var U=(()=>{class s{getBulkData(){return[{requestId:"12345",submissionDate:"2024-09-10",status:"Completed",recordsProcessed:1e4,successRate:98,errors:"200 invalid meters"},{requestId:"67890",submissionDate:"2024-09-12",status:"InProgress",recordsProcessed:5e3,successRate:90,errors:"100 incomplete data"},{requestId:"11223",submissionDate:"2024-09-14",status:"Pending",recordsProcessed:2e3,successRate:0,errors:"API timeout"},{requestId:"33445",submissionDate:"2024-09-15",status:"Failed",recordsProcessed:3e3,successRate:0,errors:"API timeout"}]}getBulk(){return Promise.resolve(this.getBulkData())}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function $(s,T){if(s&1&&(t(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25)(5,"label",26),a(6,"Posted By:"),r(),t(7,"h5",27),a(8),r()(),t(9,"div",28)(10,"label",29),a(11,"Created Date:"),r(),t(12,"h5",27),a(13),r()()(),t(14,"div",24)(15,"div",25)(16,"label",30),a(17,"Category:"),r(),t(18,"h5",31),a(19),r()(),t(20,"div",28)(21,"label",32),a(22,"Status:"),r(),t(23,"h5",33),a(24),r()()(),t(25,"div",34)(26,"label",26),a(27,"Description:"),r(),t(28,"h5",35),a(29),r()()()()()),s&2){let e=T.$implicit;o(5),n("for","postedBy-",e.id,""),o(2),n("id","postedBy-",e.id,""),o(),l(e.postedBy),o(2),n("for","createdDate-",e.id,""),o(2),n("id","createdDate-",e.id,""),o(),l(e.createdDate),o(3),n("for","category-",e.id,""),o(2),n("id","category-",e.id,""),o(),l(e.category),o(2),n("for","status-",e.id,""),o(2),n("id","status-",e.id,""),o(),l(e.status),o(2),n("for","description-",e.id,""),o(2),n("id","description-",e.id,""),o(),l(e.description)}}var _=(()=>{class s{constructor(e,i,d,q){this.bulkService=e,this.userService=i,this.customerService=d,this.authService=q,this.cols=[],this.totalUserCount=0,this.totalCustomerCount=0,this.customerList=[],this.loading=!1,this.error=null,this.totalAwaitingReviewStatus=0,this.totalRejectStatus=0,this.totalApprovalStatus=0,this.hasErrors=!1,this.userAddedError=!1,this.errorMessage="",this.recentActivities=[]}ngOnInit(){this.bulkService.getBulk().then(e=>this.bulk=e),this.cols=[{header:"Request Id",field:"requestId"},{header:"Submission Date",field:"submissionDate"},{header:"Status",field:"status"},{header:"Records Processed",field:"recordsProcessed"},{header:"Success Rate",field:"successRate"},{header:"Errors",field:"errors"}],this.loadUserCount(),this.loadCustomerCount(),this.fetchCustomersByStatus("Awaiting review"),this.fetchCustomersRejectStatus("Rejected"),this.fetchApprovalStatus("Approved"),this.loadPieChartData(),this.loadRecentActivities()}loadUserCount(){this.userService.getTotalUser().subscribe(e=>{console.log("User count received:",e),this.totalUserCount=e},e=>{console.error("Error fetching user count:",e)})}loadCustomerCount(){this.customerService.getCustomerList().subscribe(e=>{console.log("Customer count received:",e),this.totalCustomerCount=e},e=>{console.error("Error fetching customer count:",e)})}fetchCustomersByStatus(e){this.loading=!0,this.customerService.getCustomerAwaitingReviewStatus(e).subscribe({next:i=>{this.totalAwaitingReviewStatus=i.data.count,this.loading=!1},error:i=>{this.error="Failed to fetch customer data",this.loading=!1,console.error(i)}})}fetchCustomersRejectStatus(e){this.loading=!0,this.customerService.getCustomerRejectStatus(e).subscribe({next:i=>{this.totalRejectStatus=i.data.count,this.loading=!1},error:i=>{this.error="Failed to fetch customer data",this.loading=!1,console.error(i)}})}fetchApprovalStatus(e){this.loading=!0,this.customerService.getCustomerApprovalStatus(e).subscribe({next:i=>{this.totalApprovalStatus=i.data.count,this.loading=!1},error:i=>{this.error="Failed to fetch customer data",this.loading=!1,console.error(i)}})}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}loadPieChartData(){this.customerService.getPieChartData().subscribe(e=>{this.pieData=e,this.pieOptions={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:i=>`${i.label}: ${i.raw}`}}}}},e=>{console.error("Error loading pie chart data:",e)})}loadRecentActivities(){this.customerService.getRecentActivities().subscribe(e=>{this.recentActivities=e},e=>{console.error("Error loading recent activities:",e)})}static{this.\u0275fac=function(i){return new(i||s)(m(U),m(k),m(j),m(w))}}static{this.\u0275cmp=f({type:s,selectors:[["app-dashboard"]],decls:57,vars:8,consts:[[1,"grid"],[1,"col-12","md:col-6","lg:col-4"],[1,"p-3","text-white","h-8rem","border-round-2xl","m-0","bg-center","bg-cover","bg-no-repeat","bg-cyan-400","shadow-1",2,"background-image","url('assets/layout/images/dashboard/effect-1.svg')"],[1,"font-bold","w-full","mb-2"],[1,"text-white","text-2xl","font-bold","w-full","flex","align-items-center","py-1","gap-2"],[1,"pi","pi-users","ml-2","p-3","bg-blue-500","border-circle"],[1,"p-3","text-white","h-8rem","border-round-2xl","m-0","bg-center","bg-cover","bg-no-repeat","bg-orange-400","shadow-1",2,"background-image","url('assets/layout/images/dashboard/effect-2.svg')"],[1,"pi","pi-hourglass","ml-2","p-3","bg-orange-600","border-circle"],[1,"p-3","text-white","h-8rem","border-round-2xl","m-0","bg-center","bg-cover","bg-no-repeat","bg-purple-400","shadow-1",2,"background-image","url('assets/layout/images/dashboard/effect-3.svg')"],[1,"pi","pi-check-circle","ml-2","p-3","bg-purple-600","border-circle"],[1,"p-3","text-white","h-8rem","border-round-2xl","m-0","bg-center","bg-cover","bg-no-repeat","bg-blue-400","shadow-1",2,"background-image","url('assets/layout/images/dashboard/effect-4.svg')"],[1,"pi","pi-check-circle","ml-2","p-3","bg-blue-600","border-circle"],[1,"p-3","text-white","h-8rem","border-round-2xl","m-0","bg-center","bg-cover","bg-no-repeat","bg-red-400","shadow-1",2,"background-image","url('assets/layout/images/dashboard/effect-1.svg')"],[1,"pi","pi-check-circle","ml-2","p-3","bg-red-600","border-circle"],[1,"col-12","lg:col-6"],[1,"card","flex","flex-column","align-items-center","border-round-2xl"],[1,"text-left","w-full"],["type","pie",3,"data","options"],[1,"card","h-full","flex","flex-column","p-3","border-round-2xl"],[1,"text-left","w-full","mb-5"],["class","hover:shadow-1 border-round mb-3",4,"ngFor","ngForOf"],[1,"hover:shadow-1","border-round","mb-3"],[1,"flex","flex-column","gap-4","w-full","p-3","cursor-pointer"],[1,"flex","flex-column","gap-4","w-full"],[1,"flex","flex-row","gap-4","w-full"],[1,"flex","flex-column","w-full","sm:w-6","md:w-6","lg:w-6"],[1,"mr-2",3,"for"],[2,"margin-top","-1px",3,"id"],[1,"flex","flex-column","w-full","sm:w-6","md:w-6","lg:w-6","ml-auto"],[1,"mr-2",2,"float","inline-end",3,"for"],[1,"category-label",3,"for"],[1,"category-text",2,"margin-top","-1px",3,"id"],[1,"status-label",3,"for"],[1,"status-text",2,"margin-top","-1px",3,"id"],[1,"flex","flex-column","w-full"],[1,"w-full",2,"margin-top","-1px",3,"id"]],template:function(i,d){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),a(5,"Users"),r()(),t(6,"div",4),c(7,"i",5),t(8,"span"),a(9),r()()()(),t(10,"div",1)(11,"div",6)(12,"div",3)(13,"span"),a(14,"Approved Customer"),r()(),t(15,"div",4),c(16,"i",7),t(17,"span"),a(18),r()()()(),t(19,"div",1)(20,"div",8)(21,"div",3)(22,"span"),a(23,"Awaiting Review Customer"),r()(),t(24,"div",4),c(25,"i",9),t(26,"span"),a(27),r()()()(),t(28,"div",1)(29,"div",10)(30,"div",3)(31,"span"),a(32,"Total Customer"),r()(),t(33,"div",4),c(34,"i",11),t(35,"span"),a(36),r()()()(),t(37,"div",1)(38,"div",12)(39,"div",3)(40,"span"),a(41,"Rejected Customer"),r()(),t(42,"div",4),c(43,"i",13),t(44,"span"),a(45),r()()()(),t(46,"div",14)(47,"div",15)(48,"h5",16),a(49,"Performance Metric"),r(),c(50,"p-chart",17),r()(),t(51,"div",14)(52,"div",18)(53,"h5",19),a(54,"Recent Activities"),r(),t(55,"div"),g(56,$,30,25,"div",20),r()()()()),i&2&&(o(9),l(d.totalUserCount),o(9),l(d.totalApprovalStatus),o(9),l(d.totalAwaitingReviewStatus),o(9),l(d.totalCustomerCount),o(9),l(d.totalRejectStatus),o(5),u("data",d.pieData)("options",d.pieOptions),o(6),u("ngForOf",d.recentActivities))},dependencies:[b,R],styles:[".category-label[_ngcontent-%COMP%], .status-label[_ngcontent-%COMP%], .description-text[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.description-text[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;color:#555}.card[_ngcontent-%COMP%]{padding:20px}.card[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;scroll-behavior:smooth}@media (max-width: 768px){.card[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}}"]})}}return s})();var G=[{path:"",component:_}],le=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=v({type:s})}static{this.\u0275inj=h({imports:[B,x,C,I,y,A,M,D,E,O,P,S.forChild(G)]})}}return s})();export{le as DashboardModule,G as dashboardRoutes};
